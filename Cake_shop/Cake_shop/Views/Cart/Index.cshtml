
@{
    ViewBag.Title = "Giỏ hàng";
    Layout = null;
}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="~/assets/css/base.css" rel="stylesheet" />
    <link href="~/assets/css/style.css" rel="stylesheet" />
    <link rel="stylesheet" href="./assets/fontawesome/fontawesome-free-6.5.1/fontawesome-free-6.5.1-web/css/all.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="~/assets/css/grid.css" rel="stylesheet" />
    <link href="~/assets/css/cart.css" rel="stylesheet" />
</head>

<body>
    @Html.Partial("_Header")

    <div class="content-area">
        <div class="grid wide container">
            <div class="row">
                <div class="col l-12" id="load_data">
                    @Html.Action("Partial_ItemCart", "Cart")
                </div>
            </div>
        </div>

        <div class="modal">
            <div class="modal__overlay"></div>

            <div class="modal__body js-modal__body" id="search__btn">
                <div class="modal__inner">
                    <div class="header-wrap-1 ">
                        <div class="logo">
                            <a href="index.html" class="logo-wrap">
                                <img class="img-fluid"
                                     src="https://theme.hstatic.net/200000833741/1001197874/14/logo.png?v=2" width="157"
                                     height="36">
                            </a>
                        </div>
                        <div class="header-search">
                            <input type="text" class="header-search-input" placeholder="Bạn muốn tìm cái gì ?">
                            <button class="header-search-btn">
                                <i class="fa-solid fa-magnifying-glass"></i>
                            </button>
                        </div>
                        <div class="header-right">
                            <div class="icon-header">
                                <span class=" header-icon">
                                    <a class="header-icon-link js-header-icon-link">
                                        <i class="fa-solid fa-magnifying-glass"></i>
                                    </a>
                                </span>
                                <!-- User Layout -->
                                <div class="header__account">
                                    <div class="header__account-wrap">
                                        <i class="fa-solid fa-thin fa-user"></i>

                                    </div>

                                </div>
                                <!-- Cart layout -->
                                <div class="header__cart">
                                    <a href="cart.html" class="header__cart-link">
                                        <div class="header__cart-wrap">
                                            <i class="fa-solid fa-thin fa-cart-shopping"></i>
                                            <span class="count-item count-item-pr">0</span>
                                            <div class="header__cart-list header__cart-list--no-cart">
                                                <span class="header__cart-list-no-cart-msg">Không có sản phẩm nào!</span>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @Html.Partial("_Footer")

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="~/assets/js/slickSlider.js"></script>
        <script src="~/assets/js/modal.js"></script>
        <script src="~/assets/js/quantity.js"></script>
        <script src="~/Scripts/jShopping.js"></script>
        <script>
            $(document).ready(function () {
                $('body').on('click', '.btnAddToCart', function (e) {
                    e.preventDefault();
                    var id = $(this).data('id');
                    var quantity = 1;
                    var Tquantity = $('#quantity_value1').val();
                    if (Tquantity !== '') {
                        quantity = parseInt(Tquantity);
                    }
                    $.ajax({
                        url: '/Cart/AddToCart',
                        type: 'POST',
                        data: { id: id, quantity: quantity },
                        success: function (rs) {
                            if (rs.Success) {
                                $('#checkout-item').text(rs.Count);
                                alert(rs.msg);
                                updateCount();
                            }
                        }
                    });
                });

            });
            function updateCount() {
                $.ajax({
                    url: '/Cart/ShowCount',
                    type: 'GET',
                    success: function (rs) {
                        if (rs.Success) {
                            var newCount = rs.count;
                            $('#countSpan').text(newCount);
                        }
                    }
                });
            }
        </script>
</body>
